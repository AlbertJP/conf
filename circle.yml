checkout:
  post:
    - git submodule sync
    - git submodule update --init

dependencies:
  override:
    - sudo apt-get install lua5.2

test:
  override:
    - python -c "import json; json.load(open('valhalla.json'))"
    - (rc=0; for f in *.lua; do lua $f &> /dev/null || rc=$?; done; exit $rc;)

general:
  artifacts:
    - valhalla.json
